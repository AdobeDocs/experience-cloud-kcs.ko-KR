---
title: "AEM Dispatcher가 캐시하는 요청을 알아봅니다."
description: 설명
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: “KCS”
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Roxann McGlumphy
article-created-date: "12/2/2022 9:08:56 PM"
article-published-by: Nayanika Chakravarty
article-published-date: "3/23/2023 5:12:49 PM"
version-number: 2
article-number: KA-17497
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=0534af84-8572-ed11-9561-6045bd006079"
source-git-commit: 067464d20ff3960470a3ded0dcd15a8d6dbbc37b
workflow-type: tm+mt
source-wordcount: '440'
ht-degree: 7%

---

# AEM Dispatcher가 캐시하는 요청을 알아봅니다

## 설명 {#description}

<br>문제<br><br>
AEM Dispatcher에서 HTTP 요청/응답을 캐시하지 않는 이유를 결정해야 합니다
<br><br>환경<br><br>
AEM Dispatcher 4.3.3


## 해결 방법 {#resolution}


이 설명서는 AEM Dispatcher 모듈을 통해 전달되는 요청 및 응답의 캐시 능력에 영향을 주는 가장 중요한 시나리오를 다룹니다. 모든 캐시 규칙은 적용되지 않습니다.

<b>HTTP 요청 및 캐싱 규칙</b>

HTTP 요청을 디스패처에서 캐시하려면 다음 규칙을 준수해야 합니다.

1. URL은 절대입니다(에서 작동하지 않음). 또는 ..)에는 파일 확장자가 있고 URL의 파일 이름은 파일 시스템의 파일로 작동합니다.
   <b>관련 로그 메시지:</b>


   ```
   URI not canonical: %s.    
   Unable to map URI to file: %s.    
   cache file path too long    
   temporary file path too long    
   request URL has no extension
   ```



   <b>예:</b>


   | `/content/test` | 캐시되지 않음 |
   | --- | --- |
   | `/content/test.html` | 캐시됨 |


2. 첫 번째 파일 확장자 뒤에 슬래시가 없습니다.<br>

   <b>관련 로그 메시지:</b>


   ```
   request URL has trailing slash
   ```



   <b>예:</b>


   | `/content/test.html/` | 캐시되지 않음 |
   | --- | --- |
   | `/content/test.html/foo.jpg` | 캐시되지 않음 |
   | `/content/test.html` | 캐시됨 |


3. HTTP GET 또는 HEAD 메서드를 사용합니다.<br>

   <b>관련 로그 메시지:</b>


   ```
   request method is neither GET nor HEAD
   ```



   <b>예:</b>


   | `HEAD /content/test.html HTTP/1.1` | 캐시됨 |
   | --- | --- |
   | `GET /content/dam/test.jpg HTTP/1.1` | 캐시되지 않음 |
   | `POST /content/test.html HTTP/1.1` | 캐시되지 않음 |


4. 디스패처에 정의된 /CACHE = /RULES에 의해 요청이 거부됩니다. 팜 구성입니다.
   <b>관련 로그 메시지:</b>


   ```
   URI not  in cache rules: %s request URL not in cache rules
   ```



   <b>예:</b>


   | <br><br>    ```<br>    Farm has /cache = /rules and a request is received for /content/test.html<br>        /cache<br>        {<br>         ...<br>         /rules<br>         {<br>          /0001 {<br>          type "deny"<br>          glob "*"<br>          }<br>         }<br>        }<br>    ```<br><br> | 캐시되지 않음 |
   | --- | --- |
   | <br><br>    ```<br>    Farm has /cache = /rules and a request is received for /content/test.html<br>        /cache<br>        {<br>         ...<br>         /rules<br>         {<br>          /0001 {<br>          type "allow"<br>          glob "*"<br>          }<br>         }<br>        }<br>    ```<br><br> | 캐시됨 |


5. HTTP 요청이 권한 부여 헤더를 포함하지 않거나 헤더를 포함하지만 /ALLOWAUTHORIZED가 FARM 구성에서 1로 설정되어 있습니다.
   <b>관련 로그 메시지:</b>


   ```
   request contains authorization
   ```



   <b>예:</b>


   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html HTTP/1.1    Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l<br>        dispatcher.any farm /cache = /allowAuthorized configuration:<br>        /cache {<br>           /allowAuthorized “0”    }<br>    ```<br><br> | 캐시되지 않음 |
   | --- | --- |
   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html HTTP/1.1    Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l<br>        dispatcher.any farm /cache = /allowAuthorized configuration:<br>        /cache {<br>           /allowAuthorized “1”    }<br>    ```<br><br> | 캐시됨 |


6. HTTP 요청은 쿠키 헤더에 LOGIN-TOKEN 또는 AUTHORIZATION COOKIE를 포함하거나 해당 쿠키를 모두 포함하고 있고 FARM 구성에서 /ALLOWAUTHORIZED가 1로 설정됩니다.
   <b>관련 로그 메시지:</b>


   ```
   request contains authorization
   ```



   <b>예:</b>


   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html HTTP/1.1    Cookie: login-token=…<br>        dispatcher.any farm /cache = /allowAuthorized configuration:<br>        /cache {<br>           /allowAuthorized “0”    }<br>    ```<br><br> | 캐시되지 않음 |
   | --- | --- |
   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html HTTP/1.1    Cookie: authorization=YWxhZGRpbjpvcGVuc2VzYW1l<br>        dispatcher.any farm /cache = /allowAuthorized configuration:<br>        /cache {<br>           /allowAuthorized “0”    }<br>    ```<br><br> | 캐시되지 않음 |
   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html HTTP/1.1    Cookie: login-token=…<br>        dispatcher.any farm /cache = /allowAuthorized configuration:<br>        /cache {<br>           /allowAuthorized “1”    }<br>    ```<br><br> | 캐시됨 |


7. URL에 QUERYSTRING 매개 변수가 있으며 FARM의 /IGNOREURLPARAMS CONFIGURATION을 통해 매개 변수를 무시할 수 있습니다.
   <b>관련 로그 메시지:</b>


   ```
   request contains a query string
   ```



   <b>예:</b>


   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html?test=1 HTTP/1.1    Farm /cache configuration:<br>        /ignoreUrlParams {     /0001 { /type “allow” /glob “*” }    }<br>    ```<br><br> | 캐시됨 |
   | --- | --- |
   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html?test=1 HTTP/1.1    Farm /cache configuration:<br>        /ignoreUrlParams {     /0001 { /type “deny” /glob “*” } <br>           /0001 { /type “allow” /glob “test” }    }<br>    ```<br><br> | 캐시됨 |
   | HTTP 요청:<br><br>    ```<br>    GET /content/test.html?test=1 HTTP/1.1    dispatcher.any farm /cache = /allowAuthorized configuration:<br>        /ignoreUrlParams {<br>         /0001 { /type “deny” /glob “*” } <br>           /0001 { /type “allow” /glob “q” }    }<br>    ```<br><br> | 캐시되지 않음 |



<b>HTTP 응답 및 캐싱 규칙:</b>

다음 기준이 충족되는 경우 AEM에서 반환되는 HTTP 응답은 캐시할 수 있습니다.

1. 디스패처는 정의된 &quot;RENDERS&quot; 중 하나로부터 200 OK 응답을 보내고 받을 수 있습니다.

   <b>참고:</b> 없는 경우 [/timeout](https://experienceleague.adobe.com/docs/experience-manager-dispatcher/using/configuring/dispatcher-configuration.html?lang=ko-KR) 이 /renders에 설정되어 있거나 0으로 설정되어 있으면 인스턴스가 다운되더라도 AEM 인스턴스에 대한 연결이 계속 대기합니다.
   <b>관련 로그 메시지:</b>


   ```
   Unable to send request to remote server. Unable to receive response from remote server. Remote server returned: %s No backend available.
   ```



   <b>예:</b>


   | HTTP 요청:<br><br>    200 OK | 캐시됨 |
   | --- | --- |
   | HTTP 요청:<br><br>    404 페이지를 찾을 수 없음 | 캐시되지 않음 |


2. 다음 응답 헤더가 응답에 없습니다.

   - `Dispatcher: no-cache`
   - `Cache-control: no-cache`
   - `Pragma: no-cache`

   <b>관련 로그 메시지:</b>


   ```
   Backend forbids caching: %s, sent: %s" response contains no_cache
   ```



   <b>예:</b>


   | HTTP 응답:<br><br>    200 OK<br><br>    디스패처: 캐시 없음 | 캐시되지 않음 |
   | --- | --- |
   | HTTP 응답:<br>    <br><br>    200 OK<br><br>    캐시 제어: 캐시 없음 | 캐시되지 않음 |
   | HTTP 응답:<br><br>    200 OK<br><br>    Pragma: 캐시 없음 | 캐시되지 않음 |
   | HTTP 응답:<br><br>    200 OK<br> | 캐시됨 |


3. 컨텐츠 길이 값이 0바이트보다 큽니다.
   <b>관련 로그 메시지:</b>


   ```
   response content length is zero
   ```



   <b>예:</b>


   | HTTP 응답:<br><br>    200 OK<br><br>    컨텐츠 길이: 0 | 캐시되지 않음 |
   | --- | --- |
   | HTTP 응답:<br><br>    200 OK<br><br>    컨텐츠 길이: 3120년 | 캐시됨 |


