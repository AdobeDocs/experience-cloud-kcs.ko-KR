---
title: "동기 AEM 인덱스를 다시 색인화하는 방법 | AEM, Oak"
description: 설명
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: helpx.adobe.com/experience-manager/kb/how-to-reindex-a-synchronous-AEM-index-AEM-Oak.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/17/2021 9:19:48 PM"
article-published-by: Emily Geary
article-published-date: "3/17/2021 9:21:41 PM"
version-number: 2
article-number: KA-16460
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=3613fb7d-6687-eb11-a812-000d3a593216"
exl-id: 1209609f-84a9-4810-b7c8-1193b09f82d7
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '412'
ht-degree: 0%

---

# 동기 AEM 인덱스를 다시 색인화하는 방법 | AEM, Oak

## 설명


다운타임을 초래하지 않고 동기 Oak 인덱스를 올바르게 다시 색인화하려면 어떻게 합니까?


## 해상도


다시 인덱스 속성을 true로 설정하여 동기 인덱스를 다시 인덱싱하면 Oak 인스턴스가 중지될 수 있는 동기 작업이 발생합니다. 이러한 상황을 방지하려면 색인을 백그라운드 스레드로 보냅니다.  이렇게 하려면 아래 단계를 수행합니다.

<b>1단계:</b> 백그라운드 스레드에서 다시 색인화

1. 인덱스 정의에서 CRXDE Lite에서 비동기 색인에 사용할 수 있도록 속성 색인에 대한 다음 속성을 설정하십시오. `/oak:index/property` 색인

   `reindex=true`

   `reindex-async=true`
2. 위에서 노드를 새로 고치는지 확인하려면 `async="async-reindex"` 를 설정해야 합니다.
3. 를 호출합니다 `startPropertyIndexAsyncReindex` on `PropertyIndexAsyncReindex` MBean. 이렇게 하면 해당 유형의 인덱스를 검색할 백그라운드 작업이 시작됩니다. 사후 호출 시 재색인화가 수행됩니다.
4. 재색인화가 완료되면 재색인화 플래그가 false로 재설정됩니다.
5. 인덱스를 동기화 인덱스로 다시 변경하려면 3단계를 다시 호출합니다. 비동기 플래그를 삭제하지 않으면 Mbean을 여러 번 호출해야 할 수 있습니다(이 인덱스에 동시에 영향을 주는 변경 사항이 있는 경우 이러한 문제가 발생할 수 있음).



*참고:* 전용 `async="async-reindex"` 색인이 발생할 스레드를 제어할 때 이 삭제됩니다.  다음 `reindex-async` 속성은 자동으로 변경되지 않는 구성 플래그일 뿐입니다. 이 생각은 미래의 재색인을 제어하는 특정 인덱스 정의에 대해 한 번 설정하는 것입니다. 그것은 그것이 그곳에 남아 있을 것으로 기대되며, 그러면 당신은 그것을 다시 만질 필요가 없을 것입니다.


<b>2단계:</b> 다시 인덱싱 체크포인트 제거(AEM 6.2 및 이전 버전만 해당)

비동기 재색인화 프로세스 중에 저장소 체크포인트가 만들어집니다. 색인 작업이 완료되면 아래에 설명된 대로 릴리스해야 나중에 수정 버전 가비지 수집을 원활하게 할 수 있습니다.

1. 먼저 CheckpointManager MBean을 엽니다.

   MongoMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManger](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManger)

   TarMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger)
2. 를 호출합니다 `listCheckpoints()` 작업
3. 를 사용하여 체크포인트 행 찾기 `name=async-reindex` 속성을 사용합니다.
4. 클립보드에 해당 ID 값 복사

   MongoMK의 경우 다음과 비슷합니다. `r1234567aaaa-0-1`

   TarMK의 경우 다음과 비슷합니다. `6eac07d0-fe27-4d16-82f8-6d5da4cefd67`
5. 그런 다음 를 엽니다. `releaseCheckpoint()` 작업.
6. 복사한 ID를 p1로 붙여넣고 &quot;호출&quot;을 클릭합니다.
7. 이 단계에서는 체크포인트를 해제합니다.
