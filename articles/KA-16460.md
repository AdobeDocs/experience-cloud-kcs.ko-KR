---
title: “동기식 AEM 인덱스를 다시 인덱싱하는 방법 | AEM, Oak”
description: 설명
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: “KCS”
resolution: Resolution
internal-notes: "Helpx Link: helpx.adobe.com/experience-manager/kb/how-to-reindex-a-synchronous-AEM-index-AEM-Oak.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/17/2021 9:19:48 PM"
article-published-by: Emily Geary
article-published-date: "3/17/2021 9:21:41 PM"
version-number: 2
article-number: KA-16460
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=3613fb7d-6687-eb11-a812-000d3a593216"
exl-id: 1209609f-84a9-4810-b7c8-1193b09f82d7
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: ht
source-wordcount: '412'
ht-degree: 100%

---

# 동기식 AEM 인덱스를 다시 인덱싱하는 방법 | AEM, Oak

## 설명


다운타임이 발생하지 않고 동기식 Oak 인덱스를 제대로 다시 인덱싱하려면 어떻게 합니까?


## 해상도


reindex 속성을 true로 설정하여 동기식 인덱스를 다시 인덱싱하게 되면 동기 작업을 수행하여 Oak 인스턴스를 중단할 수 있습니다. 이 상황이 발생하지 않도록 하려면 인덱싱을 백그라운드 스레드로 보내십시오.  이렇게 하려면 아래 단계를 수행합니다.

<b>1단계:</b> 백그라운드 스레드에서 다시 인덱싱

1. 비동기 인덱싱 - `/oak:index/property` 인덱스에서 사용할 수 있도록 CRXDE Lite의 다음 속성을 속성 인덱스에 대한 인덱스 정의로 설정합니다.

   `reindex=true`

   `reindex-async=true`
2. 위의 노드가 새로 고쳐졌는지 확인하려면 `async="async-reindex"`을 설정해야 합니다.
3. `PropertyIndexAsyncReindex` MBean에서 `startPropertyIndexAsyncReindex`를 호출합니다. 이러면 해당 유형의 인덱스를 검색하는 백그라운드 작업이 시작됩니다. 호출 이후 로그 라인 리인덱싱이 수행될지 표시되어야 합니다.
4. 리인덱싱이 완료되면 reindex 플래그가 false로 재설정됩니다.
5. 인덱스를 동기화 인덱스로 다시 변경하려면 3단계를 다시 호출합니다. 비동기 플래그가 삭제되지 않는 경우 Mbean을 여러 번 호출해야 합니다(이 인덱스에 동시에 영향을 미치는 변경 사항이 발생하는 경우).



*참고:* 인덱싱이 발생할 스레드를 제어하므로 `async="async-reindex"`만 제거됩니다.  `reindex-async` 속성은 자동으로 변경되지 않는 구성 플래그일 뿐입니다. 향후 모든 리인덱싱을 제어하는 특정 인덱스 정의에 대해 한 번만 설정하는 것이 좋습니다. 상태가 그대로 유지되며 다시 터치할 필요가 없습니다.


<b>2단계:</b> 리인덱싱 체크포인트 제거 (AEM 6.2 및 이전 버전만 해당)

비동기 리인덱싱하는 도중 저장소 체크포인트가 생성됩니다. 인덱싱 작업이 완료되면 나중에 수정 가비지 수집을 원활하게 보장하기 위해 아래 설명된 대로 릴리스해야 합니다.

1. 먼저 CheckpointManager MBean을 엽니다.

   MongoMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManger](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManger)

   TarMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger)
2. `listCheckpoints()` 작업 호출
3. `name=async-reindex` 속성을 사용하여 체크포인트 행을 검색합니다.
4. ID 값을 클립보드에 복사

   MongoMK에서 해당 값은 다음과 유사합니다. `r1234567aaaa-0-1`

   TarMK에서 해당 값은 다음과 유사합니다. `6eac07d0-fe27-4d16-82f8-6d5da4cefd67`
5. 그런 다음 `releaseCheckpoint()` 작업을 엽니다.
6. 복사한 ID를 p1로 붙여넣고 “호출”을 클릭합니다.
7. 이 단계에서 체크포인트가 릴리스됩니다.
