---
title: 변수 사용 및 이해
description: 설명
solution: Experience Manager
product: Experience Manager
applies-to: Experience Manager
keywords: KCS
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Roxann McGlumphy
article-created-date: 10/21/2021 5:36:09 PM
article-published-by: Cedric Latimier
article-published-date: 1/18/2022 1:51:43 PM
version-number: 1
article-number: KA-17487
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=1280b65e-9532-ec11-b6e5-000d3a5ba97a
exl-id: 86b5580e-134f-40d7-a126-45a38b8beaec
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '926'
ht-degree: 1%

---

# 변수 사용 및 이해

## 설명


이 문서에서는 [!DNL Apache] 웹 서버 및 dispatcher 모듈 구성 파일에서 확인하십시오.
<br><br><br><br>변수<br><br><br><br> <br><br>
[!DNL Apache] 는 변수와 버전 4.1.9 이후 버전을 지원합니다 [!DNL Dispather] 모듈링하여 지원합니다.

이를 활용하여 다음과 같은 유용한 작업을 많이 수행할 수 있습니다.

- 환경별 구성 파일이 구성에서 인라인이 아니라 추출된 모든 구성 파일이 동일한 기능 출력을 사용하여 프로덕션에서 작동하는지 확인하십시오.
- 기능을 전환하고 AMS에서 제공하고 변경할 수 없는 파일의 로그 수준을 변경합니다.
- 과 같은 변수를 기반으로 사용할 include를 변경합니다. `RUNMODE` 및 `ENV_TYPE`
- 일치 `DocumentRoot`s 및 `VirtualHost` 다음 사이의 DNS 이름 [!DNL Apache] 구성 및 모듈 구성



## 해상도

<br><br>기준 변수 사용<br><br><br><br> <br><br>
AMS 기준 파일이 읽기 전용이고 변경할 수 없다는 사실 때문에 사용자가 사용하는 변수를 편집하여 설정을 끄고 구성할 수도 있는 기능이 있습니다.
<br><br><br><br> <br><br>기준 변수<br><br><br><br> <br><br>
다음은 파일 내용의 샘플입니다 <b>`/etc/httpd/conf.d/variables/ams_default.vars`</b>
<br><br><br><br><br> <br><br><br><br>

` Define DISP_LOG_LEVEL info Define AUTHOR_WHITELIST_ENABLED 0 Define PUBLISH_WHITELIST_ENABLED 0 Define AUTHOR_FORCE_SSL 1 Define PUBLISH_FORCE_SSL 0 `

<br><br><br><br><br> <br><br>예제 1 - 강제 SSL<br><br><br><br> <br><br>
위에 표시된 변수 <b>`AUTHOR_FORCE_SSL`</b>, 또는 <b>`PUBLISH_FORCE_SSL`</b> https로 리디렉션되도록 http 요청에 들어올 때 최종 사용자를 강제하는 rewrite 규칙을 사용하도록 1로 설정할 수 있습니다.

다음은 이 전환을 사용할 수 있는 구성 파일 구문입니다.
<br><br><br><br><br> <br><br><br><br>

`/VirtualHost *:80      IfModule mod_rewrite.c          ReWriteEngine    on          If "${PUBLISH_FORCE_SSL} == 1" Include /etc/httpd/conf.d/rewrites/forcessl_rewrite.rules          /If      /IfModule /VirtualHost`

<br><br><br><br><br> <br><br>
rewrite 규칙을 볼 수 있듯이 에는 최종 사용자 브라우저를 리디렉션하기 위한 코드가 있지만 1로 설정되는 변수가 파일을 사용할 수 있는지 여부입니다
<br><br><br><br> <br><br>예제 2 - 로깅 수준<br><br><br><br> <br><br>
변수 <b>`DISP_LOG_LEVEL`</b> 실행 중인 구성에서 실제로 사용되는 로그 수준에 대해 원하는 항목을 설정하는 데 사용할 수 있습니다.

다음은 ams 기준 구성 파일에 있는 구문 예입니다.
<br><br><br><br><br> <br><br><br><br>

`IfModule disp_apache2.c      DispatcherLog    logs/dispatcher.log      DispatcherLogLevel ${DISP_LOG_LEVEL} /IfModule`

<br><br><br><br><br> <br><br>
디스패처 로깅 수준을 높여야 하는 경우 `ams_default.vars` 변수 <b>`DISP_LOG_LEVEL`</b> 원하는 수준으로

예제 값은 정수 또는 단어일 수 있습니다.
<br><br><br><br> <br>

| 로그 수준 | 정수 값 | 단어 값 |
| --- | --- | --- |
| Trace | 4 | trace |
| 디버그 | 3 | 디버그 |
| 정보 | 2 | info |
| Warning | 1 | 경고 |
| 오류 | 0 | 라는 오류가 표시됩니다 |

<br><br><br> <br><br>예제 3 - 허용 목록<br><br><br><br> <br><br>
변수 <b>`AUTHOR_WHITELIST_ENABLED`</b> 및 <b>`PUBLISH_WHITELIST_ENABLED`</b> IP 주소를 기반으로 최종 사용자 트래픽을 허용 또는 허용하지 않는 규칙을 포함하는 rewrite 규칙을 참여하도록 1로 설정할 수 있습니다.  이 기능을 전환하려면 포함할 수 있도록 화이트리스트 규칙 파일 만들기와 함께 결합해야 합니다.

다음은 변수가 whitelist 파일의 includs 및 whitelist 파일 예제를 가능하게 하는 방법에 대한 몇 가지 구문 예입니다

<b>`sample.vhost`:</b>
<br><br><br><br><br> <br><br><br><br>

`VirtualHost *:80      Directory /          If "${AUTHOR_WHITELIST_ENABLED} == 1"              Include /etc/httpd/conf.d/whitelists/*_whitelist.rules          /If      /Directory /VirtualHost`

<br><br><br><br><br> <br><br>
<b>`sample_whitelist.rules`</b>:
<br><br><br><br><br> <br><br><br><br>

`RequireAny    Require ip 10.43.0.10/24 /RequireAny`

<br><br><br><br><br> <br><br>
볼 수 있듯이 *`sample_whitelist.rules`* 에서는 IP 제한을 적용하지만 변수를 전환하면 *`sample.vhost`*
<br><br><br><br> <br><br>변수를 넣을 위치<br><br><br><br> <br><br>웹 서버 시작 인수<br><br><br><br> <br><br>
AMS는 글로벌 변수를 [!DNL Apache] 파일 내의 프로세스 <b>`/etc/sysconfig/httpd`</b>

이 파일에는 다음과 같이 미리 정의된 변수가 있습니다.
<br><br><br><br><br> <br><br><br><br>

AUTHOR_IP=&quot;10.43.0.59&quot; AUTHOR_PORT=&quot;4502&quot; AUTHOR_DOCROOT=&#39;/mnt/var/www/author&#39; PUBLISH_IP=&quot;10.43.0.20&quot; PUBLISH_PORT=&quot;4503&quot; PUBLISH_DOCROOT=&#39;/mnt/var/www/html&#39; ENV_TYPE=&#39;dev&#39; 런타임 모드=&#39;dev&#39;

<br><br><br><br><br> <br><br>
이러한 항목은 변경할 수 없지만 구성 파일에서 활용하는 것이 좋습니다

참고:

서비스가 시작될 때만 이 파일이 포함되기 때문에  변경 사항을 적용하려면 서비스를 다시 시작해야 합니다.  다시 로드만으로는 충분하지 않지만 다시 시작해야 함을 의미합니다


<br><br><br><br> <br><br>변수 파일(`.vars`)<br><br><br><br> <br><br>
코드에서 제공하는 사용자 지정 변수는 *에 있어야 합니다.`.vars`*디렉토리 내의 파일 <b>`/etc/httpd/conf.d/variables/`</b>

이러한 파일에는 원하는 사용자 지정 변수가 있을 수 있으며 일부 구문 예는 다음 샘플 파일에서 확인할 수 있습니다

<b>`/etc/httpd/conf.d/variables/weretail_domains_dev.vars`</b>:
<br><br><br><br><br> <br><br><br><br>

`Define WERETAIL_DOMAIN dev.weretail.com Define WERETAIL_ALT_DOMAIN dev.weretail.net`

<br><br><br><br><br> <br><br>
<b>`/etc/httpd/conf.d/variables/weretail_domains_stage.vars`:</b>
<br><br><br><br><br> <br><br><br><br>

`Define WERETAIL_DOMAIN stage.weretail.com` `Define WERETAIL_ALT_DOMAIN stage.weretail.net`


<br><br><br><br><br> <br><br>
<b>`/etc/httpd/conf.d/variables/weretail_domains_prod.vars`</b>:
<br><br><br><br><br> <br><br><br><br>

`Define WERETAIL_DOMAIN www.weretail.com Define WERETAIL_ALT_DOMAIN www..weretail.net`

<br><br><br><br><br> <br><br>
자신만의 변수 파일을 만들 때 컨텐츠와 설명서에 제공된 명명 표준에 따라 파일 이름을 지정하십시오 [여기](https://helpx.adobe.com/experience-manager/kb/ams-dispatcher-manual/explanation-config-files.html#naming-convention).  위의 예에서 변수 파일이 구성 파일에서 사용할 변수로 다른 DNS 항목을 호스팅함을 확인할 수 있습니다.
<br><br><br><br> <br><br>변수 사용<br><br><br><br> <br><br>
변수 파일 내에 변수를 정의했으므로 다른 구성 파일 내에서 변수를 올바르게 사용하는 방법을 알 수 있습니다.

이 예제를 사용합니다 `.vars` 적절한 사용 사례를 보여 주는 위의 파일.

모든 환경 기반 변수를 전체적으로 포함시켜 파일을 만들겠습니다 <b>`/etc/httpd/conf.d/000_load_env_vars.conf`</b>

`Include /etc/httpd/conf.d/variables/*_${ENV_TYPE}.vars Include /etc/httpd/conf.d/variables/*_${RUNMODE}.vars`

<br><br><br><br><br> <br><br>
httpd 서비스가 시작될 때 이 서비스가 AMS가 설정한 변수를 가져옵니다. <b>`/etc/sysconfig/httpd`</b> 및 에는 변수 세트가 있습니다. <b>`ENV_TYPE`</b> 및 <b>`RUNMODE`</b>

이 전역 `.conf` 파일의 포함 순서를 포함하므로 파일을 가져올 때 일찍 가져올 수 있습니다 `conf.d` 영숫자 로드 순서는 파일 이름에 있는 000을 의미합니다. 이 순서는 디렉토리의 다른 파일 앞에 로드된다는 것을 의미합니다.

include 구문은 파일 이름에 변수를 사용하기도 합니다.  이렇게 하면 에 있는 값에 따라 실제로 로드되는 파일을 변경할 수 있습니다 `ENV_TYPE` 및 `RUNMODE` 변수를 채우는 방법을 설명합니다.

만약 *`ENV_TYPE`* 값은 <b>`dev`</b> 그런 다음 사용할 파일은 다음과 같습니다.

<b>`/etc/httpd/conf.d/variables/weretail_domains_dev.vars`</b>

만약 *`ENV_TYPE`* 값은 <b>`stage`</b> 그런 다음 사용할 파일은 다음과 같습니다.

<b>`/etc/httpd/conf.d/variables/weretail_domains_stage.vars`</b>

만약 `RUNMODE` 값은 <b>`preview`</b> 그런 다음 사용할 파일은 다음과 같습니다.

<b>`/etc/httpd/conf.d/variables/weretail_domains_preview.vars`</b>

해당 파일이 포함되면 내부에 저장된 변수 이름을 사용할 수 있습니다.

Adobe에서 <b>`/etc/httpd/conf.d/available_vhosts/weretail.vhost`</b> 파일에서는 개발용으로만 작동했던 일반 구문을 교환할 수 있습니다.


```
VirtualHost *:80      ServerName    dev.weretail.com      ServerAlias    dev.weretail.net |
```

dev, stage 및 prod에 작동하는 변수의 기능을 사용하는 최신 구문으로,

```
VirtualHost *:80      ServerName    ${WERETAIL_DOMAIN}      ServerAlias    ${WERETAIL_ALT_DOMAIN}
```


Adobe에서 <b>`/etc/httpd/conf.dispatcher.d/vhosts/weretail_vhosts.any`</b> 파일에서는 개발용으로만 작동했던 일반 구문을 교환할 수 있습니다.


```
"dev.weretail.com" "dev.weretail.net"
```


개발, 스테이지 및 프로덕션에 작동하는 변수의 기능을 사용하는 최신 구문입니다.


```
"${WERETAIL_DOMAIN}" "${WERETAIL_ALT_DOMAIN}" 
```

<br><br><br><br><br> <br><br>
이러한 변수는 환경마다 다른 파일을 배포하지 않고도 실행 설정을 개인화하는 데 매우 많은 재사용합니다.  기본적으로 변수를 사용하고 변수를 기반으로 파일을 포함하는 구성 파일을 템플릿으로 만들 수 있습니다.
